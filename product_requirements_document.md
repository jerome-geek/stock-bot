# 제품 요구사항 정의서 (PRD): 주식 변동성 분석 봇

## 1. 개요 (Executive Summary)

이 프로젝트는 특정 3배 레버리지 ETF(예: TQQQ, SOXL)를 추적하고, 통계적 방법(표준편차/Z-Score)을 사용하여 변동성을 분석하며, 가격이 평균에서 크게 벗어날 때(과매도 구간) 매수 기회를 포착하는 자동화 시스템을 구축하는 것을 목표로 합니다. 모든 데이터와 분석 결과는 구글 스프레드시트에 동기화되어 쉽게 모니터링할 수 있습니다.

## 2. 핵심 기능 (Core Features)

### 2.1 데이터 수집

-   **출처**: 일일 주가 데이터(시가, 고가, 저가, 종가, 거래량)를 수집합니다.
-   **대상 자산**: 3배 레버리지 ETF (사용자 설정 가능, 예: TQQQ, SOXL, FNGU 등).
-   **주기**: 매일 (장 마감 후).

### 2.2 구글 스프레드시트 연동

-   **저장**: 각 종목별 시트에 일일 데이터를 추가합니다.
-   **리포팅**: 요약(Dashboard) 시트에 최신 통계 지표와 매수/매도 신호를 업데이트합니다.

### 2.3 통계 분석

-   **지표**: 표준편차 (Volatility).
-   **로직**:
    -   **분석 기간**: 1년 (252 영업일) 기준. "제도권주식분석" 채널의 전략을 따름.
    -   **이동평균**: 252일 이동평균선.
    -   **표준편차 밴드**: 252일 표준편차 기반의 Z-Score 계산.
    -   **신호**:
        -   **1차 매수 (관심)**: -1 시그마 이탈 (약 상위 16% 하락)
        -   **2차 매수 (강력)**: -2 시그마 이탈 (약 상위 2.3% 하락)
        -   **3차 매수 (패닉)**: -3 시그마 이탈

### 2.4 자동화

-   스크립트는 수동으로 실행하거나 스케줄러(CI/CD 크론 또는 로컬 크론)를 통해 매일 시트를 업데이트할 수 있어야 합니다.

## 3. 기술 아키텍처 (Technical Architecture)

### 3.1 기술 스택

-   **언어**: Python 3.10+
-   **라이브러리**:
    -   `yfinance`: 주식 시장 데이터 수집.
    -   `gspread`: 구글 스프레드시트 API 연동.
    -   `pandas`: 데이터 조작 및 통계 계산.
    -   `oauth2client` / `google-auth`: 인증 처리.

### 3.2 워크플로우

1. **설정 로드**: 대상 종목 리스트와 구글 시트 인증 정보를 읽어옵니다.
2. **데이터 수집**: 각 종목의 최신 일일 데이터를 가져옵니다.
3. **통계 계산**: SMA(이동평균), 표준편차, Z-Score를 계산합니다.
4. **시트 연결**: 구글 API 인증을 수행합니다.
5. **데이터 업데이트**: 각 종목의 "History" 탭에 새로운 행을 추가합니다.
6. **대시보드 업데이트**: "Dashboard" 탭에 최신 분석 결과를 기록합니다.

## 4. 사용자 인터페이스 (User Interface)

-   **주요 UI**: 구글 스프레드시트 (Google Sheets).
    -   **탭 1 (Dashboard)**: 추적 중인 모든 종목의 요약 테이블, 현재가, Z-score, 신호(매수/대기).
    -   **탭 2+ (종목명)**: 원본 과거 데이터 및 매일 계산된 통계 수치.

## 5. 설정 요구사항 (Setup Requirements)

-   Google Cloud Platform 프로젝트 생성 및 Sheets API 활성화.
-   서비스 계정(Service Account) JSON 키.
-   파이썬 실행 환경.

## 6. 참고 자료

-   아이디어 출처: https://www.youtube.com/watch?v=WrMrHmYoCMc (레버리지 ETF의 변동성 끌림 및 평균 회귀).
